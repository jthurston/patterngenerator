<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="bower_components/spectrum/spectrum.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
        <script src="bower_components/html2canvas/build/html2canvas.min.js"></script>
        <script src="js/vendor/Canvas2Image.js"></script>

    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->

        <div id="menuContainer">

        <div id="menu">
          <span>Shape:</br>
            <select name="shapemenu" id="shapemenu"  onchange="changeShape(this.value)">
                <option value="circle">Circle</option>
                <option value="square">Square</option>
                <option value="diamond">Diamond</option>
              </select>
          </span></br>
          <span>Color:</br>
            <input type='text' id="bgp" />
          </span></br>
          <span>Border Size:</br>
            <input type="number" value="2" name="quantity" min="0" max="50" onchange="changeBorderSize(this.value)">
          </span></br>
          <span>Border Color:</br>
              <input type='text' id="bcp" />
          </span></br>
          <span>
             Offset:</br>
              <input type="checkbox" name="offSet" checked="checked" onclick="changeOffSet(this.checked);">
          </span></br>
          <span>Size:</br>
            <input type="number" value="50" name="size" min="1" max="1000" onchange="changeSize(this.value)">
          </span></br>
          <span>Background:</br>
            <input type='text' id="bgc" />
          </span></br></br>
          <span>
            <input type="button" id="btnSave" value="Save PNG"/>
          </span></br>
        </div>
        <div id="menuTab" onclick="closeMenu();">
          <div id="menuTabContent">ðŸ”½Close</div>
        </div>

      </div>

        <div id="wrapper" width="100%" height="100%">

          <div id="sheet">
          </div>

        </div>

        <div id="export-image-container"></div>

        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/spectrum/spectrum.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.3.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
<script src="js/polkadot.js">
drawDots();
</script>
<script src="js/settings.js"></script>

<script type="text/javascript">

$(window).load(function() {
 // executes when complete page is fully loaded, including all frames, objects and images
  $("#btnSaver").click(function() {
      html2canvas(document.body, {
        useCORS: true,
          onrendered: function(canvas) {
                //return Canvas2Image.saveAsPNG(canvas);
                $('body').append('<a id="export-image-container" download="polkadot.jpg">')
                img = canvas.toDataURL("image/jpeg")
                img = img.replace('data:image/jpeg;base64,', '')
                finalImageSrc = 'data:image/jpeg;base64,' + img
                $('#export-image-container').attr('href', finalImageSrc)
                $('#export-image-container')[0].click()
                $('#export-image-container').remove()
          }
    });
   })
});


//<!CDATA[
function save(canvas) {/*html2canvas-0.5.0 work with Promise.js*/
    window.open(canvas.toDataURL());
}
$(document).ready(function(){
    $('#btnSave').click(function () {
        html2canvas(document.body, {
            useCORS: true,
            allowTaint: true,
            logging: true,
            taintTest: false,
            onrendered: save /*0.4.1*/
        })/*.then(save);/*0.5.0-rc*/
    });
});
//]]>
</script>
